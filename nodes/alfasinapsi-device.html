<script type="text/html" data-template-name="alfasinapsi-device">
  <div class="form-row">
    <label for="node-config-input-host"><i class="fa fa-globe"></i> Indirizzo IP Sinapsi</label>
    <input type="text" id="node-config-input-host" placeholder="192.168.1.186">
  </div>
</script>

<script type="text/html" data-help-name="alfasinapsi-device">
  <p><b>Dispositivo Sinapsi Alfa</b> e' un nodo di configurazione usato dagli altri nodi di questo pacchetto.</p>

  <h3>Cosa fa</h3>
  <p>Salva l'indirizzo IP di Sinapsi e usa impostazioni fisse di comunicazione (per stabilita).</p>

  <h3>Impostazioni fisse</h3>
  <ul>
    <li>Porta TCP: <code>502</code></li>
    <li>Codice funzione: <code>3</code> (lettura registri holding)</li>
    <li>Unit ID: <code>1</code></li>
    <li>Timeout: <code>1000 ms</code></li>
    <li>Timeout riconnessione: <code>2000 ms</code></li>
    <li>Ritardo coda: <code>1 ms</code></li>
  </ul>

  <h3>Note</h3>
  <ul>
    <li>Se una lettura va in timeout, il nodo resetta automaticamente la connessione e riprova al prossimo polling.</li>
    <li>La coda interna continua a funzionare anche dopo una richiesta fallita.</li>
  </ul>

  <h3>Configurazione</h3>
  <dl class="message-properties">
    <dt>Indirizzo IP Sinapsi <span class="property-type">string</span></dt>
    <dd>Indirizzo IP o hostname del dispositivo Sinapsi Alfa.</dd>
  </dl>
</script>

<script type="text/javascript">
  (function () {
    RED.nodes.registerType('alfasinapsi-device', {
      category: 'config',
      defaults: {
        host: { value: "", required: true }
      },
      label: function () {
        return this.host ? ("Sinapsi " + this.host) : "Sinapsi Alfa";
      }
    });
  })();
</script>
